
金融数据看板网页应用需求文档
本文档旨在明确"金融数据看板"网页应用的设计、功能、技术和部署要求。项目目标是根据用户提供的UI截图，开发一个轻量级、易于部署的动态数据展示页面。

版本历史
版本	日期	作者	变更说明
V1.0	2025年10月1日	Gemini	初始版本，根据对话内容创建
V1.1	2025年10月1日	Gemini	添加数据库设计相关内容
## 1. 项目概述
本项目旨在开发一个金融数据看板的Web应用。应用界面需复现用户提供的截图样式，实现一个包含左、中、右三栏布局的仪表盘。该应用需支持从外部API动态获取金融指数数据，并最终以Docker镜像的形式进行交付，以实现快速、跨平台的部署。

## 2. 功能需求 (Functional Requirements)
FR-1: 界面布局
应用主界面应采用三栏式布局，从左至右依次为：指数概览区、核心数据表、历史信息区。

页面顶部应有一个包含应用标题的固定顶栏。

FR-2: 指数概览区 (左侧边栏)
显示当前日期和时间。

以卡片形式展示至少三个核心指数（如：上证指数、创业板指、沪深300）。

每个指数卡片需包含：指数名称、指数代码、当前点位、大支撑点位、距离大支撑涨跌幅百分比。

每个指数卡片需包含一个进度条/范围条，用以可视化当前点位在某个预设区间（如支撑位与压力位之间）的位置。

FR-3: 核心数据表 (中间主内容区)
以表格形式展示详细的金融产品或策略点位信息。

表格列应至少包含："致敬&基金(场内和场外)"、"大支撑位"、"正常区间"、"大压力位"、"卖出点位"等。

表格内容需支持不同的颜色和标签，以传达不同状态，例如：大支撑位和致敬显示绿色，正常区间显示黄色，压力位和卖出点位用红色显示。

FR-4: 历史信息区 (右侧边栏)
以信息块的形式，展示关键的近三年最低点位和最高点位。

内容包含标题、自最高点跌幅百分比、自最低点上涨百分比、具体数值和日期。

FR-5: 数据动态更新
应用启动时，应能自动通过后端服务调用外部API，获取最新的金融数据。

所有在界面上展示的动态数据（如指数点位、日期、表格内容等）均需来自于后端接口，而非硬编码在前端。

前期测试可以使用静态JSON数据。

FR-6: 指数代码可交互链接
在指数概览区及其他任何显示指数代码的地方，该代码应为一个可点击的超链接。

点击该链接后，应在新浏览器标签页中打开一个权威的财经网站（如：东方财富网）对应的指数详情页面。

目标URL格式: http://quote.eastmoney.com/zs<指数代码>.html

## 3. 非功能性需求 (Non-Functional Requirements)
NFR-1: 技术架构
采用前后端分离架构，以降低耦合度，方便独立开发和维护。

NFR-2: 轻量化
所选技术栈应为轻量级，避免过度设计，确保应用资源占用小，启动速度快。

NFR-3: 易于部署
最终交付物必须是一个Docker镜像。
部署过程应简化为标准的 docker build 和 docker run 命令。
应采用多阶段构建（Multi-stage build）Dockerfile，以最小化最终生产镜像的体积。

NFR-4: 可维护性
前端代码应采用组件化思想进行开发，提高代码复用率。

后端逻辑应清晰，数据获取、处理和API服务应分层明确。

数据应与代码分离，核心业务数据和配置可通过修改独立文件（如 data.json 或数据库）来更新，无需重新编译代码。

## 4. 技术栈选型
### 4.1 前端框架
Vue.js+Vue Router+Vite	学习曲线平缓，组件化开发体验好，轻量且性能高。
### 4.2 后端框架
Python + Flask	Flask框架极简，上手快。Python拥有无与伦比的数据科学生态，便于未来进行数据分析、处理和自动化任务扩展。
### 4.3 数据库
SQLite	轻量级、无服务器的数据库引擎，适合单机部署，减少系统复杂度。
### 4.4 外部数据源
外部数据源	Tushare (首选), Baostock	Tushare提供专业、稳定、全面的A股数据接口，免费额度足够项目初期使用。Baostock可作为备选。
### 4.5 反向代理/静态文件服务
Nginx (在Docker中)	高性能Web服务器，用于托管前端静态资源和作为反向代理将API请求转发给后端Flask应用。（注：也可将静态文件服务集成到Flask中以简化单容器部署）。

### 4.6 容器化
容器化	Docker	实现环境隔离、标准化部署，满足"易于部署"的核心要求。
## 5. 数据存储设计
### 5.1 数据库选型
采用SQLite作为数据存储方案，理由如下：

轻量级，无需单独部署数据库服务

适合单机应用场景

减少系统复杂度和部署成本

支持标准SQL语法，易于维护

### 5.2 数据库表结构设计
### 5.2.1 指数表 (indices)  
存储指数基本信息和实时点位数据。

sql
CREATE TABLE indices (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,              -- 指数名称，如"创业板"
    code TEXT UNIQUE NOT NULL,       -- 指数代码，如"399006"
    current_point REAL,              -- 当前点位
    change_percent REAL,             -- 距离大支撑涨跌幅百分比
    support_point REAL,              -- 支撑点位
    pressure_point REAL,             -- 压力点位
    progress REAL,                   -- 在支撑压力位间的百分比位置
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
### 5.2.2 核心数据表 (core_data)
存储策略点位和基金代码等详细信息。

sql
CREATE TABLE core_data (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    index_code TEXT NOT NULL,        -- 关联的指数代码
    etf_code TEXT,                   -- 场内基金代码
    mutual_code TEXT,                -- 场外基金代码
    support_level TEXT,              -- 支撑点位笔记
    normal_level TEXT,               -- 正常区间笔记
    pressure_level TEXT,             -- 压力点位笔记
    sell_level TEXT,                 -- 卖出点位笔记
    other_level TEXT,                -- 其他信息
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (index_code) REFERENCES indices(code)
);
### 5.2.3 历史信息表 (history)
存储近三年最高点和最低点信息。

sql
CREATE TABLE history (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    index_code TEXT NOT NULL,        -- 关联的指数代码
    type TEXT NOT NULL,              -- 'three_year_low' 或 'three_year_high'
    value REAL NOT NULL,             -- 点位数值
    date TEXT NOT NULL,              -- 日期 'YYYY-MM-DD'
    change_percent REAL,             -- 涨跌幅百分比
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (index_code) REFERENCES indices(code),
    UNIQUE(index_code, type)         -- 每个指数每种类型只有一条记录
);
### 5.3 数据关联设计
通过 index_code 字段建立表间关联关系

支持一对多关系：一个指数对应多条核心数据和历史记录

使用外键约束确保数据完整性

### 5.4 数据初始化
提供初始数据插入脚本，包含至少三个核心指数（创业板、上证指数、沪深300）的示例数据。

### 5.5 数据更新策略    
指数实时数据通过Tushare API定期更新

策略点位数据通过管理界面或配置文件更新

历史极值数据通过Tushare历史数据接口计算得出

## 6. 部署需求
### 6.1 Docker化部署
需提供一个 Dockerfile 文件，该文件能够完整构建并打包整个应用（前端+后端）。

Dockerfile应包含构建前端静态文件和配置后端运行环境两个阶段。

提供清晰的启动命令说明，包括如何构建镜像和如何通过 docker run 命令运行容器（需注明端口映射）。

### 6.2 数据库初始化
Docker容器启动时自动初始化SQLite数据库

包含示例数据的插入

数据库文件持久化存储，确保容器重启后数据不丢失

### 6.3 环境配置
通过环境变量配置Tushare API token等敏感信息

提供默认配置，降低部署复杂度

支持开发、测试和生产环境的差异化配置

## 7. API接口设计
### 7.1 单一数据接口
采用单一接口返回所有看板数据，简化前端数据获取逻辑：

text
GET /api/dashboard
响应格式：

{
  "timestamp": "2025-10-01 15:30:00",
  "data": [
    "indices": {
      "name": "创业板",
      "code": "399006",
      "current_point": 2227,
      "change_percent": -21.42,
      "support_point": 1750,
      "pressure_point": 3300,
      "progress": 50.25
    },
    "core_data": {
      "etf_code": "159915",
      "mutual_code": "110026",
      "support_level": "1700-1750 放个明牌，创业板指1700-1750之间会买入一笔 2023年12月18日",
      "normal_level": "小支撑位 12330",
      "pressure_level": "第一压力位 12100; 第二压力位 13200",
      "sell_level": "卖出点位 1、12300；2.13500 2023年12月18日",
      "other_level": "其他类致敬点位"
    },
    "history": {
      "three_year_low": {
        "value": 1433,
        "date": "2024-02-05",
        "rise_from_low": 50.2
      },
      "three_year_high": {
        "value": 3576,
        "date": "2021-07-22",
        "drop_from_high": -38
      }
    }
  ],
}
### 7.2 数据缓存策略
实现适当的数据缓存机制，减少对外部API的频繁调用

设置合理的缓存过期时间，平衡数据实时性和系统性能